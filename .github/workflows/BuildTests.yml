name: Swift

on: 
pull_request:
    branches:
        - main
        - development
    jobs:
        Run_workspace_Tests:
            runs-on: macOS-latest
            steps:
                - uses: actions/checkout@v1
                - name: List available Xcode versions
                  run: ls /Applications | grep Xcode
                - name: Select Xcode
                  run: sudo xcode-select -switch /Applications/Xcode_12.5.app && /usr/bin/xcodebuild -version
                - name: Install CocoaPods
                  run: brew install cocoapods
                - name: Install dependencies
                  run: pod install
                - name: Run unit tests
                  run: xcodebuild -workspace Jade-Mainframe.xcworkspace -scheme Jade-Mainframe -destination platform\=iOS\ Simulator,OS\=14.5,name\=iPhone\ 12 build test | xcpretty && exit ${PIPESTATUS[0]}
