name: Build

on: 
    push:
        branches:
            - master
            - development
    pull_request:
        branches:
            - master
            - development
jobs:
    Build:
        runs-on: macos-latest
        steps:
            - uses: actions/checkout@v1

            - name: List available Xcode versions
              run: ls /Applications | grep Xcode

            - name: Select Xcode
              run: sudo xcode-select -switch /Applications/Xcode_12.4.app && /usr/bin/xcodebuild -version

            - name: Install pods
              run: pod install

            - name: Build and run unit tests
              run: xcodebuild -workspace Jade-Mainframe.xcworkspace -scheme Jade-Mainframe -destination platform\=iOS\ Simulator,OS\=14.4,name\=iPhone\ 12 build test | xcpretty && exit ${PIPESTATUS[0]}
